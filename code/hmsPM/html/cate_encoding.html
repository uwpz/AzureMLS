<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Generate Encoding for Categorical Features</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for cate_encoding {hmsPM}"><tr><td>cate_encoding {hmsPM}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Generate Encoding for Categorical Features</h2>

<h3>Description</h3>

<p>The following encoding methods are mostly suited for tree-based prediction
models. This function creates a named vector (<em>lookup table</em>) which can
be used to encode feature values with the <code><a href="encode.html">encode</a></code>-function.
</p>


<h3>Usage</h3>

<pre>
cate_encoding(x, method, y, y_ref_level, n_top_levels = 20,
  decreasing = TRUE, enc_nas = TRUE, enc_others = TRUE,
  na_value = NULL, other_value = NULL)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
<p>Feature values to be encoded.</p>
</td></tr>
<tr valign="top"><td><code>method</code></td>
<td>
<p>Encoding method. Options: <code>label</code>, <code>count</code>,
<code>target</code>, <code>self</code>, <code>self_topn</code>, <code>count_others</code>.</p>
</td></tr>
<tr valign="top"><td><code>y</code></td>
<td>
<p>Target values. <em>Required</em> for
<code>target</code>-encoding.</p>
</td></tr>
<tr valign="top"><td><code>y_ref_level</code></td>
<td>
<p>Target reference level. <em>Required</em> for
<code>target</code>-encoding.</p>
</td></tr>
<tr valign="top"><td><code>n_top_levels</code></td>
<td>
<p>Maximum number of levels. <em>Required</em> for
<code>self_topn</code>- and <code>count_others</code>-encoding.</p>
</td></tr>
<tr valign="top"><td><code>decreasing</code></td>
<td>
<p>Sort order of encoded values. <em>Optional</em> for
<code>count</code>-, <code>count_others</code>-, and <code>target</code>-encoding.</p>
</td></tr>
<tr valign="top"><td><code>enc_nas</code></td>
<td>
<p>(Logical) Encode missing values? Default = <code>TRUE</code>.
<em>Required</em> for all encoding methods.</p>
</td></tr>
<tr valign="top"><td><code>enc_others</code></td>
<td>
<p>(Logical) Encode unkown/other values? Default =
<code>TRUE</code>. <em>Required</em> for <code>label</code>-, <code>count</code>-,
<code>target</code>-, and <code>self</code>-encoding.</p>
</td></tr>
<tr valign="top"><td><code>na_value</code></td>
<td>
<p>Replacement value for <code>NA</code>s. <em>Optional</em> for
<code>self</code>- and <code>self_topn</code>-encoding.</p>
</td></tr>
<tr valign="top"><td><code>other_value</code></td>
<td>
<p>Replacement value for unknown/other values to be encoded
later. <em>Optional</em> for <code>self</code>- and <code>self_topn</code>-encoding.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><strong>Method Specific Arguments</strong>
</p>
<p>Overview of <em>required</em> and <em>optional</em> paramaters as well as
<em>default</em> argument values for all encoding <code>method</code>s.
</p>

<table summary="Rd table">
<tr>
 <td style="text-align: left;">
  <code>method</code>       </td><td style="text-align: center;"> <code>label</code>
                           </td><td style="text-align: center;"> <code>count</code>
                                </td><td style="text-align: center;"> <code>target</code>
                                     </td><td style="text-align: center;"> <code>self</code>
                                          </td><td style="text-align: center;"> <code>self_topn</code>
                                               </td><td style="text-align: center;"> <code>count_others</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>y</code>            </td><td style="text-align: center;"> <em>n.a.</em>
                           </td><td style="text-align: center;"> <em>n.a.</em>
                                </td><td style="text-align: center;"> <em>required</em>
                                     </td><td style="text-align: center;"> <em>n.a.</em>
                                          </td><td style="text-align: center;"> <em>n.a.</em>
                                               </td><td style="text-align: center;"> <em>n.a.</em> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>y_ref_level</code>  </td><td style="text-align: center;"> <em>n.a.</em>
                           </td><td style="text-align: center;"> <em>n.a.</em>
                                </td><td style="text-align: center;"> <em>required</em>
                                     </td><td style="text-align: center;"> <em>n.a.</em>
                                          </td><td style="text-align: center;"> <em>n.a.</em>
                                               </td><td style="text-align: center;"> <em>n.a.</em> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>n_top_levels</code> </td><td style="text-align: center;"> <em>n.a.</em>
                           </td><td style="text-align: center;"> <em>n.a.</em>
                                </td><td style="text-align: center;"> <em>n.a.</em>
                                     </td><td style="text-align: center;"> <em>n.a.</em>
                                          </td><td style="text-align: center;"> <code>20</code>
                                               </td><td style="text-align: center;"> <code>20</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>decreasing</code>   </td><td style="text-align: center;"> <em>n.a.</em>
                           </td><td style="text-align: center;"> <code>TRUE</code>
                                </td><td style="text-align: center;"> <code>TRUE</code>
                                     </td><td style="text-align: center;"> <em>n.a.</em>
                                          </td><td style="text-align: center;"> <em>n.a.</em>
                                               </td><td style="text-align: center;"> <code>TRUE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>enc_nas</code>      </td><td style="text-align: center;"> <code>TRUE</code>
                           </td><td style="text-align: center;"> <code>TRUE</code>
                                </td><td style="text-align: center;"> <code>TRUE</code>
                                     </td><td style="text-align: center;"> <code>TRUE</code>
                                          </td><td style="text-align: center;"> <code>TRUE</code>
                                               </td><td style="text-align: center;"> <code>TRUE</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>enc_others</code>   </td><td style="text-align: center;"> <code>TRUE</code>
                           </td><td style="text-align: center;"> <code>TRUE</code>
                                </td><td style="text-align: center;"> <code>TRUE</code>
                                     </td><td style="text-align: center;"> <code>TRUE</code>
                                          </td><td style="text-align: center;"> <em>n.a.</em>
                                               </td><td style="text-align: center;"> <em>n.a.</em> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>na_value</code>     </td><td style="text-align: center;"> <em>n.a.</em>
                           </td><td style="text-align: center;"> <em>n.a.</em>
                                </td><td style="text-align: center;"> <em>n.a.</em>
                                     </td><td style="text-align: center;"> <em>optional</em>
                                          </td><td style="text-align: center;"> <em>optional</em>
                                               </td><td style="text-align: center;"> <em>n.a.</em> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>other_value</code>  </td><td style="text-align: center;"> <em>n.a.</em>
                           </td><td style="text-align: center;"> <em>n.a.</em>
                                </td><td style="text-align: center;"> <em>n.a.</em>
                                     </td><td style="text-align: center;"> <em>optional</em>
                                          </td><td style="text-align: center;"> <em>optional</em>
                                               </td><td style="text-align: center;"> <em>n.a.</em>
</td>
</tr>

</table>

<p><strong>Method Specific OTHER and NA Encodings</strong>
</p>
<p>The encoding of OTHER and NA values can be used with the argument values
<code>enc_others = TRUE</code> and <code>enc_nas = TRUE</code>, respectively. The
<code>other_value</code> and <code>na_value</code> can be specified for the <code>self</code>-
and <code>self_topn</code>-encodings. The other encoding methods have predefined
values for <code>other_value</code> and <code>na_value</code>.
</p>

<table summary="Rd table">
<tr>
 <td style="text-align: left;">
  <code>method</code>       </td><td style="text-align: center;"> OTHER argument
                      </td><td style="text-align: center;"> <code>other_value</code>
                      </td><td style="text-align: center;"> NA argument
                      </td><td style="text-align: center;"> <code>na_value</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>label</code>        </td><td style="text-align: center;"> <em>n.a.</em>             </td><td style="text-align: center;"> <code>max(enc)+1</code>
                      </td><td style="text-align: center;"> <em>n.a.</em>             </td><td style="text-align: center;"> <code>0</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>count</code>        </td><td style="text-align: center;"> <em>n.a.</em>             </td><td style="text-align: center;"> <code>max(enc)+1</code>
                      </td><td style="text-align: center;"> <em>n.a.</em>             </td><td style="text-align: center;"> <code>0</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>target</code>       </td><td style="text-align: center;"> <em>n.a.</em>             </td><td style="text-align: center;"> <code>max(enc)+1</code>
                      </td><td style="text-align: center;"> <em>n.a.</em>             </td><td style="text-align: center;"> <code>0</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>self</code>         </td><td style="text-align: center;"> <code>other_value</code>      </td><td style="text-align: center;"> <code>_OTHER_</code>
                      </td><td style="text-align: center;"> <code>na_value</code>         </td><td style="text-align: center;"> <code>_MISSING_</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>self_topn</code>    </td><td style="text-align: center;"> <code>other_value</code>      </td><td style="text-align: center;"> <code>_OTHER_</code>
                      </td><td style="text-align: center;"> <code>na_value</code>         </td><td style="text-align: center;"> <code>_MISSING_</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>count_others</code> </td><td style="text-align: center;"> <em>n.a.</em>             </td><td style="text-align: center;"> <code>max(enc)+1</code>
                      </td><td style="text-align: center;"> <em>n.a.</em>             </td><td style="text-align: center;"> <code>0</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><strong>Method Descriptions</strong>
</p>

<dl>
<dt><code>label</code></dt><dd><p>The feature values are numerated in the order of their
first appearance starting at 1.</p>
</dd>
<dt><code>count</code></dt><dd><p>The feature values are numerated according to their
frequency in (by default) decreasing order starting at 1.</p>
</dd>
<dt><code>target</code></dt><dd><p>The feature values are encoded with the count-encoded
mean of the target reference level <code>y_ref_level</code> over each feature
value.</p>
</dd>
<dt><code>self</code></dt><dd><p>Self encoding. This <code>method</code> can be used for
<code>OTHER</code> and <code>NA</code> encoding.</p>
</dd>
<dt><code>self_topn</code></dt><dd><p>Self encoding of the top N most frequent
feature levels (<code>n_top_levels</code>).</p>
</dd>
<dt><code>count_others</code></dt><dd><p>Count encoding for remaining levels of
<code>self_topn</code>-encoding. All <code>n_top_levels</code> are encoded to the
value <code>n_levels-n_top_levels+1</code>, all remaining levels are numerated
according to their frequency in (by default) decreasing order starting at
1.</p>
</dd>
</dl>



<h3>Value</h3>

<p>Named vector with encoding for feature values.
</p>


<h3>See Also</h3>

<p>Other feature encoding functions: <code><a href="encode.html">encode</a></code>
</p>


<h3>Examples</h3>

<pre>
cate_encoding(c("a", "c", "b"), method = "label")
cate_encoding(letters[c(1:3,2:3,3)], method = "count")
cate_encoding(letters[c(1:3,2:3,3)], method = "self_topn", n_top_levels = 2)
cate_encoding(letters[c(1:3,2:3,3)], method = "count_others", n_top_levels = 2)
</pre>

<hr /><div style="text-align: center;">[Package <em>hmsPM</em> version 1.0.0 <a href="00Index.html">Index</a>]</div>
</body></html>
